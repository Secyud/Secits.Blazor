@namespace Secyud.Secits.Blazor
@using Secyud.Secits.Blazor.Settings
@inherits SPluggableBase

@{
    base.BuildRenderTree(__builder);
}

@code
{
    protected override RenderFragment GenerateChildContent() =>
        __builder =>
        {
            @GenerateHeader()
            @GenerateBody()
            @GenerateFooter()
        };

    protected virtual RenderFragment? GenerateHeader()
    {
        var renders = GetRenders(RendererPosition.Header);
        return GenerateContent(renders);
    }

    protected RenderFragment GenerateContent(List<IContentRenderer> renderers)
    {
        return __builder =>
        {
            foreach (var renderer in renderers)
            {
                @renderer.RenderTemplate()
            }
        };
    }

    protected abstract RenderFragment? GenerateBody();

    protected virtual RenderFragment? GenerateFooter()
    {
        var renders = GetRenders(RendererPosition.Footer);
        return GenerateContent(renders);
    }
}
